# Flappy Hands

![Flappy Hands](./demo.gif)<!-- 如果有演示图可以放在这里 -->

## 项目介绍

这是一个创新的基于 Web 技术的 Flappy Bird 游戏，利用 Google MediaPipe Hands 技术实现完全的手势控制。玩家可以通过摄像头捕捉手部动作来控制游戏，无需键盘或鼠标，提供全新的交互体验。

## 技术栈

- **前端技术**：HTML5, CSS3, JavaScript
- **游戏渲染**：Canvas API
- **手势识别**：Google MediaPipe Hands
- **依赖库**：
  - MediaPipe Hands 模型
  - Camera Utils
  - Drawing Utils

## 功能特点

- 🎮 **手势控制**：通过捏合和悬停两种手势实现游戏控制
- 📱 **响应式设计**：适配不同屏幕尺寸
- 🎨 **美观界面**：现代化的UI设计，清晰的视觉反馈
- 🏆 **分数记录**：自动保存最高分数
- 🔄 **游戏状态管理**：完整的开始、游戏中、结束状态控制
- ⏱️ **倒计时功能**：游戏开始前的准备倒计时
- 🖼️ **实时手部追踪显示**：可视化手部骨骼和关键点

## 安装与运行

### 前提条件

- 支持摄像头的设备（电脑、平板等）
- 现代浏览器（推荐 Chrome、Firefox、Edge）
- 稳定的网络连接（首次加载需要下载 MediaPipe 模型）
- 光线充足的环境（提高手势识别准确率）

### 运行方法

由于浏览器安全限制，无法直接打开 HTML 文件访问摄像头，需要通过本地服务器运行：

#### 方法一：使用 Python 简易服务器

```bash
# 进入项目目录
cd flappyBirdByGesture

# 启动 Python 服务器
python3 -m http.server 8000
```

#### 方法二：使用 VS Code Live Server 插件

1. 安装 VS Code
2. 安装 Live Server 插件
3. 右键点击 index.html 文件，选择 "Open with Live Server"

#### 方法三：使用 Node.js http-server

```bash
# 安装 http-server（如果尚未安装）
npm install -g http-server

# 进入项目目录并启动服务器
cd flappyBirdByGesture
http-server -p 8000
```

启动服务器后，在浏览器中访问：`http://localhost:8000`

## 游戏控制指南

### 手势控制说明

| 手势 | 动作 | 效果 |
|------|------|------|
| 🤏 捏合 | 拇指和食指捏在一起 | 小鸟跳跃 / 开始游戏 |
| 👆 食指向上 | 食指伸直，其他四指握拳 | 小鸟悬停（防疲劳模式） |

### 游戏状态

- **准备阶段**：显示开始界面，提示玩家使用捏合手势或点击按钮开始
- **倒计时阶段**：游戏开始前 3 秒倒计时
- **游戏中**：玩家控制小鸟穿越管道，获取分数
- **游戏结束**：显示最终分数和重新开始按钮

### 悬停模式说明

悬停模式是一种人性化设计：
- 当食指伸直向上，其他四指握拳时，小鸟会停止下坠
- 此模式适用于需要精准控制高度或手部疲劳时
- 进入悬停模式时，屏幕上会显示青色圆圈提示

## 技术实现细节

### 游戏核心逻辑

- **物理引擎**：简单的重力模拟，通过 `GRAVITY` 常量控制下降速度
- **管道生成**：随机高度生成，随分数增加难度递增（管道间距缩小）
- **碰撞检测**：基于矩形和圆形的碰撞算法
- **状态管理**：通过 `gameState` 变量管理游戏的不同阶段

### 手势识别实现

- **MediaPipe Hands**：使用预训练模型识别人手关键点
- **捏合检测**：计算拇指尖（#4）和食指尖（#8）之间的距离
- **悬停检测**：判断食指伸展状态（指尖 y 坐标小于中间关节 y 坐标）
- **视觉反馈**：实时绘制手部骨架和手势识别提示

### 项目结构

```
flappyBirdByGesture/
├── index.html           # 主页面
├── style.css            # 样式文件
├── game.js              # 游戏核心逻辑
├── hand_tracking.js     # 手势识别和控制
├── lib/                 # MediaPipe 相关依赖
│   ├── camera_utils.js  # 摄像头工具
│   ├── control_utils.js # 控制工具
│   ├── drawing_utils.js # 绘制工具
│   └── hands.js         # MediaPipe Hands 模型
└── .gitignore           # Git 忽略文件
```

## 常见问题解答

### 摄像头问题

**Q: 摄像头无法启动？**
- A: 请检查浏览器是否允许访问摄像头；确保没有其他应用占用摄像头

### 手势识别问题

**Q: 手势识别不灵敏怎么办？**
- A: 确保环境光线充足；将手放在合适距离（约0.5-1米）；保持背景简洁

**Q: 悬停模式有时不工作？**
- A: 请确保食指充分伸直，其他手指明显弯曲；尝试调整手的位置和角度

### 性能问题

**Q: 游戏卡顿严重？**
- A: 关闭其他占用资源的应用；尝试使用更现代的浏览器；降低其他网页的媒体播放

## 开发说明

### 自定义游戏参数

您可以在 `game.js` 文件中调整以下参数来自定义游戏难度：

```javascript
// 游戏设置常量
const GRAVITY = 0.12;         // 重力加速度
const JUMP_STRENGTH = -4.5;   // 跳跃力度
const PIPE_SPEED = 2;         // 管道移动速度
const PIPE_SPAWN_RATE = 200;  // 管道生成间隔（帧数）
const INITIAL_PIPE_GAP = 220; // 初始管道间距
const MIN_PIPE_GAP = 150;     // 最小管道间距
```

### 贡献指南

欢迎提交 Issues 和 Pull Requests 来改进这个项目！

## 许可证

本项目采用 MIT 许可证 - 详情请查看 LICENSE 文件

## 致谢

- Google MediaPipe 团队：提供优秀的手势识别技术
- Flappy Bird 原创游戏：灵感来源

---

祝您游戏愉快！如有任何问题或建议，请随时提出。